Arguably the most fundamental task with regard to creating a good autonomous routine is ensuring consistent and accurate movement of the chassis. Robotic autonomous movement is an unsolved problem even among professional engineers, so it is obviously a difficult task. Okapi\+Lib makes it easy to get reasonably accurate autonomous movements.

The basis for this autonomous movement is the \mbox{\hyperlink{classokapi_1_1ChassisController}{Chassis\+Controller}} class. Take a look at its A\+PI for more detailed info on it.

We\textquotesingle{}ll use a \mbox{\hyperlink{classokapi_1_1ChassisControllerIntegrated}{Chassis\+Controller\+Integrated}} for this tutorial; using the V5 motors\textquotesingle{} onboard P\+ID makes setup a much quicker and easier process (No P\+ID tuning needed!).

Let\textquotesingle{}s start by creating the \mbox{\hyperlink{classokapi_1_1ChassisControllerIntegrated}{Chassis\+Controller\+Integrated}} with drive motors in ports 1 and 2\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using namespace }\mbox{\hyperlink{namespaceokapi}{okapi}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_LEFT = 1;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_RIGHT = 2;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} chassis = \mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder}{ChassisControllerBuilder}}()}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a1ceb7c4b4f0ccfd37a92d8ffd64fa64e}{withMotors}}(DRIVE\_MOTOR\_LEFT, -DRIVE\_MOTOR\_RIGHT)}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a5dfd1f4d60a3c4bfcc28a57211c1a6a2}{build}}();}
\end{DoxyCode}


Now that we\textquotesingle{}ve created a Chassis\+Controller, let\textquotesingle{}s start moving around. There are two fundamental movement types\+: \mbox{\hyperlink{classokapi_1_1ChassisController_a6d5b69139dfa8b814d05c74c22bcaa43}{move\+Distance}} and \mbox{\hyperlink{classokapi_1_1ChassisController_aab12308b3fad6793c007d7a33730a3f7}{turn\+Angle}}, for moving forward/backward and turning on a point.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using namespace }\mbox{\hyperlink{namespaceokapi}{okapi}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_LEFT = 1;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_RIGHT = 2;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} chassis = \mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder}{ChassisControllerBuilder}}()}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a1ceb7c4b4f0ccfd37a92d8ffd64fa64e}{withMotors}}(DRIVE\_MOTOR\_LEFT, -DRIVE\_MOTOR\_RIGHT)}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a5dfd1f4d60a3c4bfcc28a57211c1a6a2}{build}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} autonomous() \{}
\DoxyCodeLine{    \textcolor{comment}{// Move to first goal}}
\DoxyCodeLine{    chassis->moveDistance(1000);}
\DoxyCodeLine{    \textcolor{comment}{// Turn to face second goal}}
\DoxyCodeLine{    chassis->turnAngle(100);}
\DoxyCodeLine{    \textcolor{comment}{// Drive toward second goal}}
\DoxyCodeLine{    chassis->moveDistance(1500);}
\DoxyCodeLine{\}}
\end{DoxyCode}


If you\textquotesingle{}d like to set movements in real life units, that\textquotesingle{}s possible as well. Just pass in the drive\textquotesingle{}s gearset and dimensions, and then use the appropriate suffix for the units that you would like the movement to occur in.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using namespace }\mbox{\hyperlink{namespaceokapi}{okapi}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_LEFT = 1;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keywordtype}{int} DRIVE\_MOTOR\_RIGHT = 2;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keyword}{auto} WHEEL\_DIAMETER = 4\_in;}
\DoxyCodeLine{\textcolor{keyword}{const} \textcolor{keyword}{auto} CHASSIS\_WIDTH = 13.5\_in;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} chassis = \mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder}{ChassisControllerBuilder}}()}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a1ceb7c4b4f0ccfd37a92d8ffd64fa64e}{withMotors}}(DRIVE\_MOTOR\_LEFT, -DRIVE\_MOTOR\_RIGHT)}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_aea1e3d32abede99a1b565205275aea78}{withGearset}}(\mbox{\hyperlink{classokapi_1_1AbstractMotor_a88aaa6ea2fa10f5520a537bbf26774d5a9f27410725ab8cc8854a2769c7a516b8}{AbstractMotor::gearset::green}})}
\DoxyCodeLine{                .\mbox{\hyperlink{classokapi_1_1ChassisControllerBuilder_a72a642f59112da74960942aae390a5ed}{withDimensions}}(\{\{WHEEL\_DIAMETER, CHASSIS\_WIDTH\}, \mbox{\hyperlink{namespaceokapi_a5263bab3bfecd482a573b6d04fb584ac}{imev5GreenTPR}}\})}
\DoxyCodeLine{                .build();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} autonomous() \{}
\DoxyCodeLine{    \textcolor{comment}{// Move 1 meter to the first goal}}
\DoxyCodeLine{    chassis->moveDistance(1\_m);}
\DoxyCodeLine{    \textcolor{comment}{// Turn 90 degrees to face second goal}}
\DoxyCodeLine{    chassis->turnAngle(90\_deg);}
\DoxyCodeLine{    \textcolor{comment}{// Drive 1 and a half feet toward second goal}}
\DoxyCodeLine{    chassis->moveDistance(1.5\_ft);}
\DoxyCodeLine{\}}
\end{DoxyCode}
 